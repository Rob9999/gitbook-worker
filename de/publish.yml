version: 0.1.0
profiles:
  default:
    description: Standardprofil für die komplette Orchestrator-Pipeline.
    steps:
    - check_if_to_publish
    - ensure_readme
    - update_citation
    - converter
    - engineering-document-formatter
    - publisher
    docker:
      use_registry: true
      image: ghcr.io/${repo}/publisher
      cache: true
  local:
    description: Lokale Ausführung ohne Registry-Zugriff.
    steps:
    - converter
    - publisher
    docker:
      use_registry: false
  publisher:
    description: Führt nur den Publisher aus (z. B. für workflow_call).
    steps:
    - publisher
    docker:
      use_registry: true
      image: ghcr.io/${repo}/publisher
      cache: true
meta:
  publish_on:
  - push
  - workflow_dispatch
  artifacts:
    keep_days: 7
project:
  name: Das ERDA Buch
  authors:
  - ERDA Team
  license: CC BY-SA 4.0
publish:
- path: ./
  out_format: pdf
  out_dir: ./publish
  out: das-erda-buch.pdf
  source_type: folder
  source_format: markdown
  use_summary: true
  use_book_json: true
  summary_mode: gitbook
  summary_appendices_last: true
  keep_combined: true
  build: true
  reset_build_flag: false
  
  # Document Type System (v2.0.1+)
  use_document_types: true
  
  document_type_config:
    # Section order in SUMMARY.md
    section_order:
      - cover
      - preface
      - list-of-tables
      - list-of-figures
      - chapters
      - epilog
      - appendices
      - glossary
      - bibliography
      - index
      - attributions
      - colophon
    
    # Section titles for SUMMARY.md
    section_titles:
      preface: "Vorwort"
      list-of-tables: "Tabellenverzeichnis"
      list-of-figures: "Abbildungsverzeichnis"
      chapters: "Hauptinhalt"
      epilog: "Abschluss"
      appendices: "Anhänge"
      glossary: "Glossar"
      bibliography: "Literatur"
      index: "Register"
      attributions: "Danksagungen"
      colophon: "Impressum"
    
    # Show in SUMMARY.md?
    show_in_summary:
      template: false
      placeholder: false
      example: true
    
    # Auto-numbering
    auto_number_chapters: true
    auto_number_appendices: true  # A, B, C, ...
    
    # Chapter-appendix handling
    chapter_appendix_indent: true
    chapter_appendix_prefix: "Appendix {chapter}.{id}"
  
  pdf_options:
    emoji_color: true
    emoji_bxcoloremoji: false
    main_font: DejaVu Serif
    sans_font: DejaVu Sans
    mono_font: DejaVu Sans Mono
    mainfont_fallback: Twemoji Mozilla:mode=harf; ERDA CC-BY CJK:mode=harf
    abort_if_missing_glyph: false
  assets:
  - path: content/.gitbook/assets
    type: images
    copy_to_output: true
