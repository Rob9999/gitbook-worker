---
version: 2.0.1
date: 2025-12-29
status: released
history:
  - date: 2025-12-29
    change: Initial release notes and usage guide for 2.0.1
---

# GitBook Worker v2.0.1 Release Notes

**Release date**: December 29, 2025  
**Focus**: Hotfix for pip usability, safer orchestration, and explicit manifest preflight

## What changed
- Enforced manifest preflight: `project.license` must be set before any destructive step (pipeline fails fast with a clear error).
- Root handling fixed: explicit `--root` is honored everywhere; auto-detection only when omitted.
- Tool fallback restored: orchestrator now uses packaged `gitbook_worker/tools` when the repo tree lacks tools (pip installs work again).
- Fail-fast execution: converter/publisher/AI-reference steps now error if required scripts are missing instead of silently skipping.
- Dry-run safety: orchestrator skips step execution in `--dry-run` mode and forwards `--dry-run` to `pipeline.py`.
- Tests: font-cache-dependent pandoc tests are skipped by default to keep pipelines green without LuaTeX cache.
- Manifest metadata: publish.yml versions bumped to 0.1.1 (de/en) to capture doc_type summary config updates.

## How to use the tool (2.0.1)
1. Installation
   - From repo root: `pip install -e .`
   - Or use the packaged wheel from your artifact store.
2. Fonts (one-time per machine)
   - Sync fonts: `python -m gitbook_worker.tools.publishing.fonts_cli sync --manifest de/publish.yml --search-path .github/fonts --search-path fonts-storage`
   - If LuaTeX is available, refresh cache: `luaotfload-tool --update --force` (see gitbook_worker/docs/attentions/lua-font-cache.md).
3. Run orchestrator (preferred end-to-end)
   - `python -m gitbook_worker.tools.workflow_orchestrator.orchestrator run --lang de --profile local`
   - Add `--dry-run` to list steps without executing.
4. Validate manifest only
   - `python -m gitbook_worker.tools.workflow_orchestrator.orchestrator validate --lang de --profile default`
5. Run publishing pipeline directly (single language)
   - `python -m gitbook_worker.tools.publishing.pipeline --root de --manifest de/publish.yml --commit HEAD --base HEAD~1`
   - Use `--no-gitbook-rename`, `--no-gitbook-summary`, or `--no-publish` to toggle stages; `--dry-run` prints commands only.

## Known considerations
- Fonts must be present and LuaTeX cache populated for full-color emoji; otherwise pandoc will abort at runtime. The CI test suite skips cache-dependent tests by default.
- `project.license` in `publish.yml` is mandatory; the pipeline stops early if missing.
- When running from a pip install, tools are loaded from the installed package if repo-local tools are absent.

## Upgrade notes from 2.0.0
- No manifest schema changes; ensure `project.license` is filled.
- No additional CLI flags required; explicit `--root` is now respected and should be provided in scripted runs for reproducibility.
