---
version: 2.0.6
date: 2026-01-10
status: draft
history:
  - "init: 2026-01-10"
---

# GitBook Worker v2.0.6 (Hotfix) Release Notes

**Release Date**: January 10, 2026  
**Tag (GitHub)**: release-v.2.0.6-hotfix  
**Packaging Version**: 2.0.6.post1 (PEP 440)

## ðŸŽ¯ Summary
- Heading adjustment now follows `SUMMARY.md` depth while preserving in-document cascades, fixing PDF ToC misalignment.
- Added documented release procedure for releases (`gitbook_worker/docs/how-to-release/release-procedure.md`).
- Packaging dependency gap fixed by declaring `pypdf` for CLI tools that import PDF utilities.

## ðŸ”§ Changes
- Heading normalizer: align the first heading of each document to the `SUMMARY.md`-prescribed level and shift subsequent headings relative, avoiding flattening.
- Documentation: new hotfix release checklist describing local/docker orchestrator runs, tests, smoke, tagging.
- `ProjectMetadata` now tolerates missing dates (default `None`) and retains policy default, matching publisher expectations.
- Added `pypdf` to runtime dependencies to keep CLI tools functional in clean installs.

## âœ… Testing
- Local orchestrator: âœ… `profile=local` on `customer-xx` produced `customer-xx/publish/xxx.pdf`.
- Docker orchestrator: âœ… `profile=docker` on `de` produced `de/publish/das-erda-buch.pdf`.
- Pytest: âœ… `python -m pytest gitbook_worker/tests -m "not slow" -q` (379 passed, 10 skipped, 10 deselected).
- Pip install smoke: âœ… `python -m build`; install wheel in fresh venv; `workflow_orchestrator --help` works after declared `pypdf` dependency.

## ðŸ“Œ Notes
- Tag to use: `release-v.2.0.6-hotfix`.
- Keep fonts managed via `defaults/fonts.yml`; set `ERDA_KEEP_LATEX_TEMP=1` for LaTeX diagnostics if needed.
- Docker run for `customer-de` skipped because `content.yaml` lacks that target; use `de`/`en` manifests unless config is extended.
